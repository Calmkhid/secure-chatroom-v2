# Deployment Guide

## GitHub Setup

1. **Initialize Git Repository** (if not already done):
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

2. **Create GitHub Repository**:
   - Go to GitHub.com and create a new repository
   - Don't initialize with README (we already have one)

3. **Push to GitHub**:
   ```bash
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   git branch -M main
   git push -u origin main
   ```

## Render Deployment

### Option 1: Automatic Deployment (Recommended)

1. **Connect GitHub to Render**:
   - Go to [render.com](https://render.com)
   - Sign up/Login with your GitHub account
   - Click "New +" â†’ "Web Service"
   - Connect your GitHub repository

2. **Configure Environment Variables**:
   - In your Render dashboard, go to your service
   - Go to "Environment" tab
   - Add these environment variables:
     ```
     NODE_ENV=production
     SESSION_SECRET=your-secret-key-here
     MONGO_URI=your-mongodb-connection-string
     ```

3. **MongoDB Setup**:
   - **Option A**: Use MongoDB Atlas (Cloud)
     - Go to [mongodb.com/atlas](https://mongodb.com/atlas)
     - Create free cluster
     - Get connection string
     - Add to MONGO_URI in Render
   
   - **Option B**: Use Render's MongoDB (Free tier available)
     - In Render dashboard, create "Redis & MongoDB" service
     - Use the provided connection string

4. **Deploy**:
   - Render will automatically deploy when you push to GitHub
   - Your app will be available at: `https://your-app-name.onrender.com`

### Option 2: Manual Deployment

1. **Create Web Service**:
   - Name: `secure-chatroom`
   - Environment: `Node`
   - Build Command: `npm install`
   - Start Command: `npm start`

2. **Set Environment Variables**:
   ```
   NODE_ENV=production
   SESSION_SECRET=your-secret-key-here
   MONGO_URI=your-mongodb-connection-string
   ```

## Environment Variables

### Required Variables:
- `MONGO_URI`: Your MongoDB connection string
- `SESSION_SECRET`: Secret key for sessions (auto-generated by Render)
- `NODE_ENV`: Set to `production` for deployment

### Optional Variables:
- `PORT`: Port number (Render sets this automatically)

## MongoDB Connection Strings

### Local Development:
```
MONGO_URI=mongodb://localhost:27017/secure-chatroom
```

### MongoDB Atlas:
```
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/secure-chatroom?retryWrites=true&w=majority
```

### Render MongoDB:
```
MONGO_URI=mongodb://username:password@host:port/database
```

## Troubleshooting

### Common Issues:

1. **MongoDB Connection Error**:
   - Check your connection string
   - Ensure MongoDB is running (for local development)
   - Verify network access (for Atlas)

2. **Build Failures**:
   - Check that all dependencies are in `package.json`
   - Ensure Node.js version is compatible

3. **Runtime Errors**:
   - Check Render logs in the dashboard
   - Verify environment variables are set correctly

### Health Check:
Your app includes a health check endpoint: `/health`
Visit: `https://your-app.onrender.com/health`

## Security Notes

- Never commit `.env` files to GitHub
- Use strong session secrets in production
- Enable HTTPS in production (Render does this automatically)
- Consider using environment-specific configurations 